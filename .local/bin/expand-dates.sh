#!/usr/bin/env bash

if [[ -z $1 ]]; then
  while IFS= read -r LINE; do
    echo "${LINE}" | perl -p -e 's/(d{1,2}\/)?(\d{1,2})\/(\d{2}[:| ])/$1$2\/20$3/; s/(d{1,2}\/)?(\d{1,2})\/(\d{2})$/$1$2\/20$3/'
  done
elif [ -f "$1" ]; then
  perl -p -e 's/(d{1,2}\/)?(\d{1,2})\/(\d{2}[:| ])/$1$2\/20$3/; s/(d{1,2}\/)?(\d{1,2})\/(\d{2})$/$1$2\/20$3/' <"$1"
else
  echo "$1" | perl -p -e 's/(d{1,2}\/)?(\d{1,2})\/(\d{2}[:| ])/$1$2\/20$3/; s/(d{1,2}\/)?(\d{1,2})\/(\d{2})$/$1$2\/20$3/'
fi
